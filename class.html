<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Class Management Dashboard</title>
    <link href="classStyle.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/x-icon" href="images/Logo.png">
    <!-- Google Fonts for Oswald -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
  </head>
    <!--jimmy-->
  <body>
    <nav>
    <!--KTI Logo and Title-->
    <p class="navMainText">
      <img id="navImage" src="Images/newlogo.png" width="100" alt="drawing of a welder">
      Keefe Tech Inventory
    </p>

    <br>

    <!--Navigation Bar-->
    <div class="topnav" id="myTopnav">
      <a href="../keefeTechInv/itemlist.html"><b><i>Items</a></b></i>
      <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
      </a>
      <!--Profile Button-->
      <button class="open-button" onclick="openForm()">Profile</button>
    </div>
      
  </nav>

    <main style="margin-top:32px;">
      <div id="addClass">
        <label for="cName">Class Name</label><br>
        <input type="text" id="cName" name="cName" placeholder="Enter new class name"><br>
        <button onclick="addClass()">Add Class</button>
      </div>

      <div id="addStudents" style="margin-top:32px;">
        <h3>Add Student</h3>
        <label for="sName">Student Name</label><br>
        <input type="text" id="sName" name="sName" placeholder="Enter student name"><br>
        <label for="sEmail">Student Email</label><br>
        <input type="text" id="sEmail" name="sEmail" placeholder="Enter student email"><br>
        <label for="sClass">Class</label><br>
        <select id="sClass" name="sClass"></select><br>
        <button onclick="addStudent()">Add Student</button>
      </div>

      <div style="margin-top:40px;">
        <h3>Classrooms & Students</h3>
        <div id="classrooms"></div>
      </div>
    </main>

    <script>
      // Store classes and students in memory
      const classes = [];
      const studentsByClass = {};

      // Add a new class
      function addClass() {
        const cName = document.getElementById("cName").value.trim();
        if (!cName) {
          alert("Please enter a class name.");
          return;
        }
        if (classes.includes(cName)) {
          alert("Class already exists.");
          return;
        }
        classes.push(cName);
        studentsByClass[cName] = [];
        document.getElementById("cName").value = "";
        updateClassDropdown();
        renderClassrooms();
      }

      // Update the class dropdown in the Add Student form
      function updateClassDropdown() {
        const sClassSelect = document.getElementById("sClass");
        sClassSelect.innerHTML = "";
        classes.forEach(cls => {
          const option = document.createElement("option");
          option.value = cls;
          option.textContent = cls;
          sClassSelect.appendChild(option);
        });
      }

      // Add a student to the selected class
      function addStudent() {
        const sName = document.getElementById("sName").value.trim();
        const sEmail = document.getElementById("sEmail").value.trim();
        const sClass = document.getElementById("sClass").value;
        if (!sName || !sEmail || !sClass) {
          alert("Please fill in all fields.");
          return;
        }
        studentsByClass[sClass].push({ name: sName, email: sEmail });
        document.getElementById("sName").value = "";
        document.getElementById("sEmail").value = "";
        renderClassrooms();
      }

      // Render all classrooms and their students
      function renderClassrooms() {
        const container = document.getElementById("classrooms");
        container.innerHTML = "";
        classes.forEach(cls => {
          const classDiv = document.createElement("div");
          classDiv.className = "classroom-block";
          classDiv.style.marginBottom = "32px";
          classDiv.innerHTML = `<h4 style="color:#d32f2f;">${cls}</h4>`;
          const table = document.createElement("table");
          table.className = "classTable";
          table.style.width = "100%";
          table.innerHTML = `
            <tr>
              <th>Student Name</th>
              <th>Email</th>
            </tr>
          `;
          studentsByClass[cls].forEach(student => {
            const row = document.createElement("tr");
            row.innerHTML = `<td>${student.name}</td><td>${student.email}</td>`;
            table.appendChild(row);
          });
          classDiv.appendChild(table);
          container.appendChild(classDiv);
        });
      }

      // Initialize dropdown on page load
      window.addEventListener("DOMContentLoaded", updateClassDropdown);
    </script>
  </body>
</html>